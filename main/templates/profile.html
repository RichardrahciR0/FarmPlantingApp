{% extends 'base.html' %}
{% load static %}

{% block content %}
<body class="{% if request.user.profile.is_dark_mode %}dark{% else %}light{% endif %}">
  <div class="header">
    <h1>Profile</h1>
    <div class="profile-row">
      <div class="avatar-circle">Avatar</div>
      <a href="{% url 'edit_profile' %}" class="btn-edit">Edit Profile</a>
    </div>
  </div>

  <div class="section">
    <h2>Mini Headline</h2>
    <p><a href="{% url 'popular' %}">Popular</a></p>
    <p><a href="{% url 'trending' %}">Trending</a></p>
    <p><a href="{% url 'today' %}">Today</a></p>
  </div>

  <div class="section">
    <h2>Content</h2>
    <p><a href="{% url 'favourite' %}">Favourite</a></p>
    <p><a href="{% url 'download' %}">Download</a></p>
  </div>

  <div class="section">
    <h2>Preferences</h2>
    <form method="POST" action="{% url 'toggle_darkmode' %}">
      {% csrf_token %}
      <label class="switch">
        <input type="checkbox" name="dark_mode" onchange="this.form.submit();" {% if request.user.profile.is_dark_mode %}checked{% endif %}>
        <span class="slider round"></span>
      </label>
      <span>Dark Mode</span>
    </form>
  </div>

  <form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button class="logout-button">Log Out</button>
  </form>

  <style>
    body.light {
      background-color: #f9f9f9;
      color: #000;
    }
    body.dark {
      background-color: #121212;
      color: #e0e0e0;
    }

    .header {
      background-color: #4b8f4b;
      color: white;
      padding: 40px 20px;
      text-align: center;
    }

    .profile-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 20px;
    }

    .avatar-circle {
      width: 80px;
      height: 80px;
      background-color: #ddd;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .btn-edit {
      display: inline-block;
      padding: 8px 16px;
      background-color: #222;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
    }

    .section {
      padding: 20px;
      margin: 10px 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      background-color: white;
    }

    body.dark .section {
      background-color: #1e1e1e;
    }

    .logout-button {
      margin: 30px 20px;
      padding: 12px 32px;
      background-color: #f44336;
      color: white;
      border: none;
      border-radius: 16px;
      font-size: 16px;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
      margin-right: 10px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0;
      right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 26px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 20px; width: 20px;
      left: 3px; bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #4CAF50;
    }

    input:checked + .slider:before {
      transform: translateX(24px);
    }
  </style>
</body>
{% endblock %}
